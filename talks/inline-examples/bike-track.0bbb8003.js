!function(){function t(t,e,r,i){Object.defineProperty(t,e,{get:r,set:i,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},o=r.parcelRequire827f;null==o&&((o=function(t){if(t in i)return i[t].exports;if(t in n){let e=n[t];delete n[t];let r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}).register=function(t,e){n[t]=e},r.parcelRequire827f=o),o.register("3OOJ5",(function(e,r){var i,n;t(e.exports,"register",(()=>i),(t=>i=t)),t(e.exports,"resolve",(()=>n),(t=>n=t));var o={};i=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)o[e[r]]=t[e[r]]},n=function(t){var e=o[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o("3OOJ5").register(JSON.parse('{"6dNpu":"bike-track.0bbb8003.js","54TNJ":"backhendl.fad54c65.gpx","0acRd":"mixed-renderers.7620afdc.css","39l4W":"mixed-renderers.88cf3e0b.js"}'));var a=o("N1rY5"),s=o("4BFFB"),l=o("5ScHR"),u={};t(u,"default",(()=>nt),(t=>nt=t));var c,h=o("7JkHi"),p=o("3dG11"),d=o("1gVIf"),f=o("7oM0w"),g=o("4LOxL"),m=o("5g6wp"),_=o("6MnPI"),v=o("6u7wO"),y=o("2vjin"),T=o("3MevS"),x=o("4pjCM"),S=o("2rUWQ"),w=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),C=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],O={rte:$,trk:tt,wpt:et},P=v.makeStructureNS(C,{rte:v.makeArrayPusher($),trk:v.makeArrayPusher(tt),wpt:v.makeArrayPusher(et)}),E=v.makeStructureNS(C,{text:v.makeObjectPropertySetter(x.readString,"linkText"),type:v.makeObjectPropertySetter(x.readString,"linkType")}),b=v.makeStructureNS(C,{rte:v.makeChildAppender((function(t,e,r){var i=r[0],n=e.getProperties(),o={node:t};o.properties=n;var a=e.getGeometry();if(a.getType()==d.default.LINE_STRING){var s=S.transformGeometryWithOptions(a,!0,i);o.geometryLayout=s.getLayout(),n.rtept=s.getCoordinates()}var l=r[r.length-1].node,u=z[l.namespaceURI],c=v.makeSequence(n,u);v.pushSerializeAndPop(o,D,v.OBJECT_PROPERTY_NODE_FACTORY,c,r,u)})),trk:v.makeChildAppender((function(t,e,r){var i=r[0],n=e.getProperties(),o={node:t};o.properties=n;var a=e.getGeometry();if(a.getType()==d.default.MULTI_LINE_STRING){var s=S.transformGeometryWithOptions(a,!0,i);n.trkseg=s.getLineStrings()}var l=r[r.length-1].node,u=G[l.namespaceURI],c=v.makeSequence(n,u);v.pushSerializeAndPop(o,Y,v.OBJECT_PROPERTY_NODE_FACTORY,c,r,u)})),wpt:v.makeChildAppender((function(t,e,r){var i=r[0],n=r[r.length-1];n.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==d.default.POINT){var a=S.transformGeometryWithOptions(o,!0,i);n.geometryLayout=a.getLayout(),it(t,a.getCoordinates(),r)}}))}),k=function(t){function e(e){var r=t.call(this)||this,i=e||{};return r.dataProjection=y.get("EPSG:4326"),r.readExtensions_=i.readExtensions,r}return w(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var i=t[e];if(this.readExtensions_){var n=i.get("extensionsNode_")||null;this.readExtensions_(i,n)}i.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!T.includes(C,t.namespaceURI))return null;var r=O[t.localName];if(!r)return null;var i=r(t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_([i]),i):null},e.prototype.readFeaturesFromNode=function(t,e){if(!T.includes(C,t.namespaceURI))return[];if("gpx"==t.localName){var r=v.pushParseAndPop([],P,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=v.createElementNS("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",v.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(v.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),v.pushSerializeAndPop({node:r},b,H,t,[e]),r},e}(_.default),j=v.makeStructureNS(C,{name:v.makeObjectPropertySetter(x.readString),cmt:v.makeObjectPropertySetter(x.readString),desc:v.makeObjectPropertySetter(x.readString),src:v.makeObjectPropertySetter(x.readString),link:J,number:v.makeObjectPropertySetter(x.readNonNegativeInteger),extensions:V,type:v.makeObjectPropertySetter(x.readString),rtept:function(t,e){var r=v.pushParseAndPop({},R,t,e);if(r){var i=e[e.length-1],n=i.flatCoordinates,o=i.layoutOptions;B(n,o,t,r)}}}),R=v.makeStructureNS(C,{ele:v.makeObjectPropertySetter(x.readDecimal),time:v.makeObjectPropertySetter(x.readDateTime)}),F=v.makeStructureNS(C,{name:v.makeObjectPropertySetter(x.readString),cmt:v.makeObjectPropertySetter(x.readString),desc:v.makeObjectPropertySetter(x.readString),src:v.makeObjectPropertySetter(x.readString),link:J,number:v.makeObjectPropertySetter(x.readNonNegativeInteger),type:v.makeObjectPropertySetter(x.readString),extensions:V,trkseg:function(t,e){var r=e[e.length-1];v.parseNode(A,t,e);var i=r.flatCoordinates;r.ends.push(i.length)}}),A=v.makeStructureNS(C,{trkpt:function(t,e){var r=v.pushParseAndPop({},I,t,e);if(r){var i=e[e.length-1],n=i.flatCoordinates,o=i.layoutOptions;B(n,o,t,r)}}}),I=v.makeStructureNS(C,{ele:v.makeObjectPropertySetter(x.readDecimal),time:v.makeObjectPropertySetter(x.readDateTime)}),N=v.makeStructureNS(C,{ele:v.makeObjectPropertySetter(x.readDecimal),time:v.makeObjectPropertySetter(x.readDateTime),magvar:v.makeObjectPropertySetter(x.readDecimal),geoidheight:v.makeObjectPropertySetter(x.readDecimal),name:v.makeObjectPropertySetter(x.readString),cmt:v.makeObjectPropertySetter(x.readString),desc:v.makeObjectPropertySetter(x.readString),src:v.makeObjectPropertySetter(x.readString),link:J,sym:v.makeObjectPropertySetter(x.readString),type:v.makeObjectPropertySetter(x.readString),fix:v.makeObjectPropertySetter(x.readString),sat:v.makeObjectPropertySetter(x.readNonNegativeInteger),hdop:v.makeObjectPropertySetter(x.readDecimal),vdop:v.makeObjectPropertySetter(x.readDecimal),pdop:v.makeObjectPropertySetter(x.readDecimal),ageofdgpsdata:v.makeObjectPropertySetter(x.readDecimal),dgpsid:v.makeObjectPropertySetter(x.readNonNegativeInteger),extensions:V}),M=["text","type"],L=v.makeStructureNS(C,{text:v.makeChildAppender(x.writeStringTextNode),type:v.makeChildAppender(x.writeStringTextNode)}),z=v.makeStructureNS(C,["name","cmt","desc","src","link","number","type","rtept"]),D=v.makeStructureNS(C,{name:v.makeChildAppender(x.writeStringTextNode),cmt:v.makeChildAppender(x.writeStringTextNode),desc:v.makeChildAppender(x.writeStringTextNode),src:v.makeChildAppender(x.writeStringTextNode),link:v.makeChildAppender(rt),number:v.makeChildAppender(x.writeNonNegativeIntegerTextNode),type:v.makeChildAppender(x.writeStringTextNode),rtept:v.makeArraySerializer(v.makeChildAppender(it))}),X=v.makeStructureNS(C,["ele","time"]),G=v.makeStructureNS(C,["name","cmt","desc","src","link","number","type","trkseg"]),Y=v.makeStructureNS(C,{name:v.makeChildAppender(x.writeStringTextNode),cmt:v.makeChildAppender(x.writeStringTextNode),desc:v.makeChildAppender(x.writeStringTextNode),src:v.makeChildAppender(x.writeStringTextNode),link:v.makeChildAppender(rt),number:v.makeChildAppender(x.writeNonNegativeIntegerTextNode),type:v.makeChildAppender(x.writeStringTextNode),trkseg:v.makeArraySerializer(v.makeChildAppender((function(t,e,r){var i={node:t};i.geometryLayout=e.getLayout(),i.properties={},v.pushSerializeAndPop(i,U,Z,e.getCoordinates(),r)})))}),Z=v.makeSimpleNodeFactory("trkpt"),U=v.makeStructureNS(C,{trkpt:v.makeChildAppender(it)}),W=v.makeStructureNS(C,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),q=v.makeStructureNS(C,{ele:v.makeChildAppender(x.writeDecimalTextNode),time:v.makeChildAppender(x.writeDateTimeTextNode),magvar:v.makeChildAppender(x.writeDecimalTextNode),geoidheight:v.makeChildAppender(x.writeDecimalTextNode),name:v.makeChildAppender(x.writeStringTextNode),cmt:v.makeChildAppender(x.writeStringTextNode),desc:v.makeChildAppender(x.writeStringTextNode),src:v.makeChildAppender(x.writeStringTextNode),link:v.makeChildAppender(rt),sym:v.makeChildAppender(x.writeStringTextNode),type:v.makeChildAppender(x.writeStringTextNode),fix:v.makeChildAppender(x.writeStringTextNode),sat:v.makeChildAppender(x.writeNonNegativeIntegerTextNode),hdop:v.makeChildAppender(x.writeDecimalTextNode),vdop:v.makeChildAppender(x.writeDecimalTextNode),pdop:v.makeChildAppender(x.writeDecimalTextNode),ageofdgpsdata:v.makeChildAppender(x.writeDecimalTextNode),dgpsid:v.makeChildAppender(x.writeNonNegativeIntegerTextNode)}),K={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function H(t,e,r){var i=t.getGeometry();if(i){var n=K[i.getType()];if(n){var o=e[e.length-1].node;return v.createElementNS(o.namespaceURI,n)}}}function B(t,e,r,i){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,e.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,e.hasM=!0):t.push(0),t}function Q(t,e,r){var i=p.default.XY,n=2;if(t.hasZ&&t.hasM?(i=p.default.XYZM,n=4):t.hasZ?(i=p.default.XYZ,n=3):t.hasM&&(i=p.default.XYM,n=3),4!==n){for(var o=0,a=e.length/4;o<a;o++)e[o*n]=e[4*o],e[o*n+1]=e[4*o+1],t.hasZ&&(e[o*n+2]=e[4*o+2]),t.hasM&&(e[o*n+2]=e[4*o+3]);if(e.length=e.length/4*n,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*n}return i}function J(t,e){var r=e[e.length-1],i=t.getAttribute("href");null!==i&&(r.link=i),v.parseNode(E,t,e)}function V(t,e){e[e.length-1].extensionsNode_=t}function $(t,e){var r=e[0],i=v.pushParseAndPop({flatCoordinates:[],layoutOptions:{}},j,t,e);if(i){var n=i.flatCoordinates;delete i.flatCoordinates;var o=i.layoutOptions;delete i.layoutOptions;var a=Q(o,n),s=new f.default(n,a);S.transformGeometryWithOptions(s,!1,r);var l=new h.default(s);return l.setProperties(i,!0),l}}function tt(t,e){var r=e[0],i=v.pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},F,t,e);if(i){var n=i.flatCoordinates;delete i.flatCoordinates;var o=i.ends;delete i.ends;var a=i.layoutOptions;delete i.layoutOptions;var s=Q(a,n,o),l=new g.default(n,s,o);S.transformGeometryWithOptions(l,!1,r);var u=new h.default(l);return u.setProperties(i,!0),u}}function et(t,e){var r=e[0],i=v.pushParseAndPop({},N,t,e);if(i){var n={},o=B([],n,t,i),a=Q(n,o),s=new m.default(o,a);S.transformGeometryWithOptions(s,!1,r);var l=new h.default(s);return l.setProperties(i,!0),l}}function rt(t,e,r){t.setAttribute("href",e);var i=r[r.length-1].properties,n=[i.linkText,i.linkType];v.pushSerializeAndPop({node:t},L,v.OBJECT_PROPERTY_NODE_FACTORY,n,r,M)}function it(t,e,r){var i=r[r.length-1],n=i.node.namespaceURI,o=i.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case p.default.XYZM:0!==e[3]&&(o.time=e[3]);case p.default.XYZ:0!==e[2]&&(o.ele=e[2]);break;case p.default.XYM:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?X[n]:W[n],s=v.makeSequence(o,a);v.pushSerializeAndPop({node:t,properties:o},q,v.OBJECT_PROPERTY_NODE_FACTORY,s,r,a)}var nt=k,ot=o("4eboh"),at=(m=o("5g6wp"),{});t(at,"default",(()=>Et),(t=>Et=t));var st={};t(st,"default",(()=>dt),(t=>dt=t));var lt=o("Lzmdv"),ut="preload",ct="useInterimTilesOnError",ht=o("6RQ94"),pt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),dt=function(t){function e(e){var r=this,i=e||{},n=ht.assign({},i);return delete n.preload,delete n.useInterimTilesOnError,(r=t.call(this,n)||this).setPreload(void 0!==i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return pt(e,t),e.prototype.getPreload=function(){return this.get(ut)},e.prototype.setPreload=function(t){this.set(ut,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ct)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ct,t)},e}(lt.default),ft={};t(ft,"default",(()=>Ot),(t=>Ot=t));var gt=o("5eOHj"),mt=function(){function t(t,e,r,i){this.minX=t,this.maxX=e,this.minY=r,this.maxY=i}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function _t(t,e,r,i,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=r,n.maxY=i,n):new mt(t,e,r,i)}var vt=mt,yt=o("dgki0"),Tt=o("5ljS4"),xt=(ht=o("6RQ94"),o("4lmw7")),St=(y=o("2vjin"),o("6fegY")),wt=(T=o("3MevS"),Tt=o("5ljS4"),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}()),Ct=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=xt.createEmpty(),r.tmpTileRange_=new vt(0,0,0,0),r}return wt(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),i=e.getUseInterimTilesOnError();return r==yt.default.LOADED||r==yt.default.EMPTY||r==yt.default.ERROR&&!i},e.prototype.getTile=function(t,e,r,i){var n=i.pixelRatio,o=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,n,o);return s.getState()==yt.default.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(yt.default.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,i){return!!this.isDrawableTile(i)&&t.prototype.loadedTileCallback.call(this,e,r,i)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],i=t.viewState,n=i.projection,o=i.resolution,a=i.center,s=i.rotation,l=t.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),p=c.getTileGridForProjection(n),d=p.getZForResolution(o,c.zDirection),f=p.getResolution(d),g=t.extent,m=r.extent&&y.fromUserExtent(r.extent,n);m&&(g=xt.getIntersection(g,y.fromUserExtent(r.extent,n)));var _=c.getTilePixelRatio(l),v=Math.round(t.size[0]*_),x=Math.round(t.size[1]*_);if(s){var S=Math.round(Math.sqrt(v*v+x*x));v=S,x=S}var w=f*v/2/_,C=f*x/2/_,O=[a[0]-w,a[1]-C,a[0]+w,a[1]+C],P=p.getTileRangeForExtentAndZ(g,d),E={};E[d]={};var b=this.createLoadedTileFinder(c,n,E),k=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var R=P.minX;R<=P.maxX;++R)for(var F=P.minY;F<=P.maxY;++F){var A=this.getTile(d,R,F,t);if(this.isDrawableTile(A)){var I=St.getUid(this);if(A.getState()==yt.default.LOADED){E[d][A.tileCoord.toString()]=A;var N=A.inTransition(I);this.newTiles_||!N&&-1!==this.renderedTiles.indexOf(A)||(this.newTiles_=!0)}if(1===A.getAlpha(I,t.time))continue}var M=p.getTileCoordChildTileRange(A.tileCoord,j,k),L=!1;M&&(L=b(d+1,M)),L||p.forEachTileCoordParentTileRange(A.tileCoord,b,j,k)}var z=f/o;Tt.compose(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,s,-v/2,-x/2);var D=Tt.toString(this.pixelTransform);this.useContainer(e,D,r.opacity);var X=this.context,G=X.canvas;Tt.makeInverse(this.inversePixelTransform,this.pixelTransform),Tt.compose(this.tempTransform,v/2,x/2,z,z,0,-v/2,-x/2),G.width!=v||G.height!=x?(G.width=v,G.height=x):this.containerReused||X.clearRect(0,0,v,x),m&&this.clipUnrotated(X,t,m),ht.assign(X,c.getContextOptions()),this.preRender(X,t),this.renderedTiles.length=0;var Y,Z,U,W=Object.keys(E).map(Number);W.sort(T.numberSafeCompareFunction),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(Y=[],Z=[]):W=W.reverse();for(var q=W.length-1;q>=0;--q){var K=W[q],H=c.getTilePixelSize(K,l,n),B=p.getResolution(K)/f,Q=H[0]*B*z,J=H[1]*B*z,V=p.getTileCoordForCoordAndZ(xt.getTopLeft(O),K),$=p.getTileCoordExtent(V),tt=Tt.apply(this.tempTransform,[_*($[0]-O[0])/f,_*(O[3]-$[3])/f]),et=_*c.getGutterForProjection(n),rt=E[K];for(var it in rt){var nt=(A=rt[it]).tileCoord,ot=tt[0]-(V[1]-nt[1])*Q,at=Math.round(ot+Q),st=tt[1]-(V[2]-nt[2])*J,lt=Math.round(st+J),ut=at-(R=Math.round(ot)),ct=lt-(F=Math.round(st)),pt=d===K;if(!(N=pt&&1!==A.getAlpha(St.getUid(this),t.time)))if(Y){X.save(),U=[R,F,R+ut,F,R+ut,F+ct,R,F+ct];for(var dt=0,ft=Y.length;dt<ft;++dt)if(d!==K&&K<Z[dt]){var gt=Y[dt];X.beginPath(),X.moveTo(U[0],U[1]),X.lineTo(U[2],U[3]),X.lineTo(U[4],U[5]),X.lineTo(U[6],U[7]),X.moveTo(gt[6],gt[7]),X.lineTo(gt[4],gt[5]),X.lineTo(gt[2],gt[3]),X.lineTo(gt[0],gt[1]),X.clip()}Y.push(U),Z.push(K)}else X.clearRect(R,F,ut,ct);this.drawTileImage(A,t,R,F,ut,ct,et,pt,r.opacity),Y&&!N?(X.restore(),this.renderedTiles.unshift(A)):this.renderedTiles.push(A),this.updateUsedTiles(t.usedTiles,c,A)}}return this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!xt.equals(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=l,this.renderedProjection=n,this.manageTilePyramid(t,c,p,l,n,g,d,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(X,t),r.extent&&X.restore(),D!==G.style.transform&&(G.style.transform=D),this.container},e.prototype.drawTileImage=function(t,e,r,i,n,o,a,s,l){var u=this.getTileImage(t);if(u){var c=St.getUid(this),h=s?t.getAlpha(c,e.time):1,p=l*h,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,n,o),d&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var i=St.getUid(t);i in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var i=St.getUid(e);i in t||(t[i]={}),t[i][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,i,n,o,a,s,l){var u=St.getUid(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,m=t.wantedTiles[u],_=t.tileQueue,v=0;for(g=r.getMinZoom();g<=a;++g)for(h=r.getTileRangeForExtentAndZ(o,g,h),p=r.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)a-g<=s?(++v,(c=e.getTile(g,d,f,i,n)).getState()==yt.default.IDLE&&(m[c.getKey()]=!0,_.isKeyQueued(c.getKey())||_.enqueue([c,u,r.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,n);e.updateCacheSize(v,n)},e}(gt.default);Ct.prototype.getLayer;var Ot=Ct,Pt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Et=function(t){function e(e){return t.call(this,e)||this}return Pt(e,t),e.prototype.createRenderer=function(){return new ft.default(this)},e}(st.default),bt=o("1rnY9"),kt=(y=o("2vjin"),{});t(kt,"ATTRIBUTION",(()=>Xe),(t=>Xe=t)),t(kt,"default",(()=>Ge),(t=>Ge=t));var jt={};t(jt,"default",(()=>ze),(t=>ze=t));var Rt={};t(Rt,"default",(()=>Me),(t=>Me=t));var Ft=o("65ADj"),At={};t(At,"default",(()=>Yt),(t=>Yt=t));var It={};t(It,"default",(()=>zt),(t=>zt=t));var Nt=o("4GA14"),Mt=(Ft=o("65ADj"),yt=o("dgki0"),St=o("6fegY"),o("46UD2")),Lt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zt=function(t){function e(e,r,i){var n=t.call(this)||this,o=i||{};return n.tileCoord=e,n.state=r,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n}return Lt(e,t),e.prototype.changed=function(){this.dispatchEvent(Ft.default.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==yt.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==yt.default.LOADED){t.interimTile=null;break}t.getState()==yt.default.LOADING?e=t:t.getState()==yt.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==yt.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){St.abstract()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var i=e-r+1e3/60;return i>=this.transition_?1:Mt.easeIn(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Nt.default),Dt=(yt=o("dgki0"),o("4eVqD")),Xt=o("1s8C5"),Gt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();var Yt=function(t){function e(e,r,i,n,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=n,s.src_=i,s.key=i,s.image_=new Image,null!==n&&(s.image_.crossOrigin=n),s.unlisten_=null,s.tileLoadFunction_=o,s}return Gt(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){var t;this.state=yt.default.ERROR,this.unlistenImage_(),this.image_=((t=Dt.createCanvasContext2D(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=yt.default.LOADED:this.state=yt.default.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==yt.default.ERROR&&(this.state=yt.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==yt.default.IDLE&&(this.state=yt.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Xt.listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(It.default),Zt={};t(Zt,"default",(()=>te),(t=>te=t));Ft=o("65ADj"),yt=o("dgki0"),xt=o("4lmw7"),y=o("2vjin");var Ut,Wt=o("4qq0p"),qt=function(){function t(t,e,r,i,n,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=y.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&xt.getWidth(i)==xt.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?xt.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?xt.getWidth(this.targetProj_.getExtent()):null;var l=xt.getTopLeft(r),u=xt.getTopRight(r),c=xt.getBottomRight(r),h=xt.getBottomLeft(r),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),m=10+(o?Math.max(0,Math.ceil(Wt.log2(xt.getArea(r)/(o*o*65536)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,m),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,r){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,i,n,o){this.triangles_.push({source:[i,n,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,i,n,o,a,s,l){var u=xt.boundingExtent([n,o,a,s]),c=this.sourceWorldWidth_?xt.getWidth(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var f=xt.boundingExtent([t,e,r,i]);d=xt.getWidth(f)/this.targetWorldWidth_>.25||d}!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)}if(!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||xt.intersects(u,this.maxSourceExtent_)){var g=0;if(!(d||isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(l>0)d=!0;else if(1!=(g=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=g&&4!=g&&8!=g)return;if(l>0){if(!d){var m=[(t[0]+r[0])/2,(t[1]+r[1])/2],_=this.transformInv_(m),v=void 0;if(p)v=(Wt.modulo(n[0],h)+Wt.modulo(a[0],h))/2-Wt.modulo(_[0],h);else v=(n[0]+a[0])/2-_[0];var y=(n[1]+a[1])/2-_[1];d=v*v+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var T=[(e[0]+r[0])/2,(e[1]+r[1])/2],x=this.transformInv_(T),S=[(i[0]+t[0])/2,(i[1]+t[1])/2],w=this.transformInv_(S);this.addQuad_(t,e,T,S,n,o,x,w,l-1),this.addQuad_(S,T,r,i,w,x,a,s,l-1)}else{var C=[(t[0]+e[0])/2,(t[1]+e[1])/2],O=this.transformInv_(C),P=[(r[0]+i[0])/2,(r[1]+i[1])/2],E=this.transformInv_(P);this.addQuad_(t,C,P,i,n,O,E,s,l-1),this.addQuad_(C,e,r,P,O,o,a,E,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(t,r,i,n,a,s),0==(14&g)&&this.addTriangle_(t,r,e,n,a,o),g&&(0==(13&g)&&this.addTriangle_(e,i,t,o,s,n),0==(7&g)&&this.addTriangle_(e,i,r,o,s,a))}},t.prototype.calculateSourceExtent=function(){var t=xt.createEmpty();return this.triangles_.forEach((function(e,r,i){var n=e.source;xt.extendCoordinate(t,n[0]),xt.extendCoordinate(t,n[1]),xt.extendCoordinate(t,n[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Kt={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};ht=o("6RQ94"),xt=o("4lmw7"),Dt=o("4eVqD"),y=o("2vjin"),Wt=o("4qq0p");function Ht(t,e,r,i,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(i,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(r,n)),t.restore()}function Bt(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Qt(t,e,r,i){var n=y.transform(r,e,t),o=y.getPointResolution(e,i,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var l=t.getExtent();if(!l||xt.containsCoordinate(l,n)){var u=y.getPointResolution(t,o,n)/o;isFinite(u)&&u>0&&(o/=u)}return o}function Jt(t,e,r,i,n,o,a,s,l,u,c,h){var p=Dt.createCanvasContext2D(Math.round(r*t),Math.round(r*e));if(ht.assign(p,h),0===l.length)return p.canvas;function d(t){return Math.round(t*r)/r}p.scale(r,r),p.globalCompositeOperation="lighter";var f=xt.createEmpty();l.forEach((function(t,e,r){xt.extend(f,t.extent)}));var g=xt.getWidth(f),m=xt.getHeight(f),_=Dt.createCanvasContext2D(Math.round(r*g/i),Math.round(r*m/i));ht.assign(_,h);var v=r/i;l.forEach((function(t,e,r){var i=t.extent[0]-f[0],n=-(t.extent[3]-f[3]),o=xt.getWidth(t.extent),a=xt.getHeight(t.extent);t.image.width>0&&t.image.height>0&&_.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,i*v,n*v,o*v,a*v)}));var y=xt.getTopLeft(a);return s.getTriangles().forEach((function(t,e,n){var a=t.source,s=t.target,l=a[0][0],u=a[0][1],c=a[1][0],g=a[1][1],m=a[2][0],v=a[2][1],T=d((s[0][0]-y[0])/o),x=d(-(s[0][1]-y[1])/o),S=d((s[1][0]-y[0])/o),w=d(-(s[1][1]-y[1])/o),C=d((s[2][0]-y[0])/o),O=d(-(s[2][1]-y[1])/o),P=l,E=u;l=0,u=0;var b=[[c-=P,g-=E,0,0,S-T],[m-=P,v-=E,0,0,C-T],[0,0,c,g,w-x],[0,0,m,v,O-x]],k=Wt.solveLinearSystem(b);if(k){if(p.save(),p.beginPath(),function(){if(void 0===Ut){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Ht(t,4,5,4,0),Ht(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Ut=Bt(e,0)||Bt(e,4)||Bt(e,8)}return Ut}()||h===Kt){p.moveTo(S,w);for(var j=T-S,R=x-w,F=0;F<4;F++)p.lineTo(S+d((F+1)*j/4),w+d(F*R/3)),3!=F&&p.lineTo(S+d((F+1)*j/4),w+d((F+1)*R/3));p.lineTo(C,O)}else p.moveTo(S,w),p.lineTo(T,x),p.lineTo(C,O);p.clip(),p.transform(k[0],k[2],k[1],k[3],T,x),p.translate(f[0]-P,f[3]-E),p.scale(i/r,-i/r),p.drawImage(_.canvas,0,0),p.restore()}})),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var i=t.target,n=(i[0][0]-y[0])/o,a=-(i[0][1]-y[1])/o,s=(i[1][0]-y[0])/o,l=-(i[1][1]-y[1])/o,u=(i[2][0]-y[0])/o,c=-(i[2][1]-y[1])/o;p.beginPath(),p.moveTo(s,l),p.lineTo(n,a),p.lineTo(u,c),p.closePath(),p.stroke()})),p.restore()),p.canvas}Wt=o("4qq0p"),xt=o("4lmw7");var Vt=o("3H2uZ"),$t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),te=function(t){function e(e,r,i,n,o,a,s,l,u,c,h,p){var d=t.call(this,o,yt.default.IDLE)||this;d.renderEdges_=void 0!==h&&h,d.contextOptions_=p,d.pixelRatio_=s,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=r,d.targetTileGrid_=n,d.wrappedTileCoord_=a||o,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=n.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),m=d.sourceTileGrid_.getExtent(),_=g?xt.getIntersection(f,g):f;if(0===xt.getArea(_))return d.state=yt.default.EMPTY,d;var v=e.getExtent();v&&(m=m?xt.getIntersection(m,v):v);var y=n.getResolution(d.wrappedTileCoord_[0]),T=function(t,e,r,i){var n=xt.getCenter(r),o=Qt(t,e,n,i);return(!isFinite(o)||o<=0)&&xt.forEachCorner(r,(function(r){return o=Qt(t,e,r,i),isFinite(o)&&o>0})),o}(e,i,_,y);if(!isFinite(T)||T<=0)return d.state=yt.default.EMPTY,d;var x=void 0!==c?c:.5;if(d.triangulation_=new qt(e,i,_,m,T*x,y),0===d.triangulation_.getTriangles().length)return d.state=yt.default.EMPTY,d;d.sourceZ_=r.getZForResolution(T);var S=d.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(S[1]=Wt.clamp(S[1],m[1],m[3]),S[3]=Wt.clamp(S[3],m[1],m[3])):S=xt.getIntersection(S,m)),xt.getArea(S)){for(var w=r.getTileRangeForExtentAndZ(S,d.sourceZ_),C=w.minX;C<=w.maxX;C++)for(var O=w.minY;O<=w.maxY;O++){var P=u(d.sourceZ_,C,O,s);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=yt.default.EMPTY)}else d.state=yt.default.EMPTY;return d}return $t(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==yt.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=yt.default.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"==typeof r?r:r[0],n="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jt(i,n,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=yt.default.LOADED}this.changed()},e.prototype.load=function(){if(this.state==yt.default.IDLE){this.state=yt.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var n=e.getState();if(n==yt.default.IDLE||n==yt.default.LOADING){t++;var o=Vt.listen(e,Ft.default.CHANGE,(function(r){var i=e.getState();i!=yt.default.LOADED&&i!=yt.default.ERROR&&i!=yt.default.EMPTY||(Vt.unlistenByKey(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,r){t.getState()==yt.default.IDLE&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Vt.unlistenByKey),this.sourcesListenerKeys_=null},e}(It.default),ee={};t(ee,"default",(()=>le),(t=>le=t));var re=o("1mHUI"),ie=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return re.assert(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},t.prototype.remove=function(t){var e=this.entries_[t];return re.assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){re.assert(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function ne(t,e,r,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=r,i):[t,e,r]}function oe(t,e,r){return t+"/"+e+"/"+r}function ae(t){return oe(t[0],t[1],t[2])}var se=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(ae(e.tileCoord)),e.release())}.bind(this))}},e}(ie),ue=(yt=o("dgki0"),{});t(ue,"default",(()=>Fe),(t=>Fe=t));var ce="tileloadstart",he="tileloadend",pe="tileloaderror",de={};t(de,"default",(()=>be),(t=>be=t)),t(de,"TileSourceEvent",(()=>Ee),(t=>Ee=t));var fe=o("0qSof"),ge=o("3f7LD"),me=(yt=o("dgki0"),St=o("6fegY"),re=o("1mHUI"),y=o("2vjin"),o("4nuo6")),_e=o("5TQMR"),ve=(re=o("1mHUI"),Wt=o("4qq0p"),xt=o("4lmw7"),T=o("3MevS"),o("43BI1")),ye=[0,0,0],Te=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,re.assert(T.isSorted(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var r=0,i=this.resolutions_.length-1;r<i;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,re.assert(this.origins_.length==this.resolutions_.length,20));var n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=xt.getTopLeft(n)),re.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,re.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:_e.DEFAULT_TILE_SIZE,re.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var r=new vt(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){var i=this.getTileRangeForExtentAndZ(n,e);r.minX=Math.max(i.minX,r.minX),r.maxX=Math.min(i.maxX,r.maxX),r.minY=Math.max(i.minY,r.minY),r.maxY=Math.min(i.maxY,r.maxY)}return r}),this):n&&this.calculateTileRanges_(n)}return t.prototype.forEachTileCoord=function(t,e,r){for(var i=this.getTileRangeForExtentAndZ(t,e),n=i.minX,o=i.maxX;n<=o;++n)for(var a=i.minY,s=i.maxY;a<=s;++a)r([e,n,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,i){var n,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(n=t[1],o=t[2]):a=this.getTileCoordExtent(t,i);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?_t(n=Math.floor(n/2),n,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],n=2*t[2];return _t(i,i+1,n,n+1,e)}var o=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],n=t[1],o=t[2];if(e===i)return _t(n,o,n,o,r);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-i),s=Math.floor(n*a),l=Math.floor(o*a);return e<i?_t(s,s,l,l,r):_t(s,Math.floor(a*(n+1))-1,l,Math.floor(a*(o+1))-1,r)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,r)},t.prototype.getTileRangeExtent=function(t,e,r){var i=this.getOrigin(t),n=this.getResolution(t),o=ve.toSize(this.getTileSize(t),this.tmpSize_),a=i[0]+e.minX*o[0]*n,s=i[0]+(e.maxX+1)*o[0]*n,l=i[1]+e.minY*o[1]*n,u=i[1]+(e.maxY+1)*o[1]*n;return xt.createOrUpdate(a,l,s,u,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var i=ye;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var n=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),_t(n,i[1],o,i[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=ve.toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*r,e[1]-(t[2]+.5)*i[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=ve.toSize(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*n[0]*i,a=r[1]-(t[2]+1)*n[1]*i,s=o+n[0]*i,l=a+n[1]*i;return xt.createOrUpdate(o,a,s,l,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,i,n){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),l=ve.toSize(this.getTileSize(o),this.tmpSize_),u=i?.5:0,c=i?.5:0,h=Math.floor((t-s[0])/r+u),p=Math.floor((s[1]-e)/r+c),d=a*h/l[0],f=a*p/l[1];return i?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),ne(o,d,f,n)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,i,n){var o=this.getOrigin(r),a=this.getResolution(r),s=ve.toSize(this.getTileSize(r),this.tmpSize_),l=i?.5:0,u=i?.5:0,c=Math.floor((t-o[0])/a+l),h=Math.floor((o[1]-e)/a+u),p=c/s[0],d=h/s[1];return i?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),ne(r,p,d,n)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){var r=T.linearFindNearest(this.resolutions_,t,e||0);return Wt.clamp(r,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),i=this.minZoom;i<e;++i)r[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=r},t}(),xe=o("6MSva");_e=o("5TQMR"),y=o("2vjin"),xt=o("4lmw7"),ve=o("43BI1");function Se(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,r,i){return function(t,e,r,i){var n=void 0!==i?i:me.default.TOP_LEFT,o=we(t,e,r);return new Te({extent:t,origin:xt.getCorner(t,n),resolutions:o,tileSize:r})}(Ce(t),e,r,i)}(t),t.setDefaultTileGrid(e)),e}function we(t,e,r,i){for(var n=void 0!==e?e:_e.DEFAULT_MAX_ZOOM,o=xt.getHeight(t),a=xt.getWidth(t),s=ve.toSize(void 0!==r?r:_e.DEFAULT_TILE_SIZE),l=i>0?i:Math.max(a/s[0],o/s[1]),u=n+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function Ce(t){var e=(t=y.get(t)).getExtent();if(!e){var r=180*y.METERS_PER_UNIT[xe.default.DEGREES]/t.getMetersPerUnit();e=xt.createOrUpdate(-r,-r,r,r)}return e}ve=o("43BI1");var Oe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Pe=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var i=e.tileGrid;return i&&ve.toSize(i.getTileSize(i.getMinZoom()),[256,256]),r.tileCache=new ee.default(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return Oe(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,i){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var o,a,s,l=!0,u=r.minX;u<=r.maxX;++u)for(var c=r.minY;c<=r.maxY;++c)a=oe(e,u,c),s=!1,n.containsKey(a)&&(s=(o=n.get(a)).getState()===yt.default.LOADED)&&(s=!1!==i(o)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,i,n){return St.abstract()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Se(t)},e.prototype.getTileCacheForProjection=function(t){return re.assert(y.equivalent(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var i=this.getTileGridForProjection(r),n=this.getTilePixelRatio(e),o=ve.toSize(i.getTileSize(t),this.tmpSize);return 1==n?o:ve.scale(o,n,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var i=e[0],n=t.getTileCoordCenter(e),o=Ce(r);if(xt.containsCoordinate(o,n))return e;var a=xt.getWidth(o),s=Math.ceil((o[0]-n[0])/a);return n[0]+=a*s,t.getTileCoordForCoordAndZ(n,i)}(i,t,r)),function(t,e){var r=t[0],i=t[1],n=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o=e.getFullTileRange(r);return!o||o.containsXY(i,n)}(t,i)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,e,r,i){},e}(ge.default),Ee=function(t){function e(e,r){var i=t.call(this,e)||this;return i.tile=r,i}return Oe(e,t),e}(fe.default),be=Pe;yt=o("dgki0"),re=o("1mHUI"),Wt=o("4qq0p");function ke(t,e){var r=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(r,a[0].toString()).replace(i,a[1].toString()).replace(n,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);return re.assert(r,55),(r.getHeight()-a[2]-1).toString()})):void 0}}function je(t,e){for(var r=t.length,i=new Array(r),n=0;n<r;++n)i[n]=ke(t[n],e);return function(t){return 1===t.length?t[0]:function(e,r,i){if(e){var n=function(t){return(t[1]<<t[0])+t[2]}(e),o=Wt.modulo(n,t.length);return t[o](e,r,i)}}}(i)}St=o("6fegY");var Re=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Fe=function(t){function e(r){var i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(i.tileUrlFunction=r.tileUrlFunction),i.urls=null,r.urls?i.setUrls(r.urls):r.url&&i.setUrl(r.url),i.tileLoadingKeys_={},i}return Re(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,i=St.getUid(r),n=r.getState();n==yt.default.LOADING?(this.tileLoadingKeys_[i]=!0,e=ce):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=n==yt.default.ERROR?pe:n==yt.default.LOADED?he:void 0),null!=e&&this.dispatchEvent(new de.TileSourceEvent(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var i=r[1].charCodeAt(0),n=r[2].charCodeAt(0),o=void 0;for(o=i;o<=n;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(je(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,r){},e.prototype.useTile=function(t,e,r){var i=oe(t,e,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(de.default),Ae=(y=o("2vjin"),St=o("6fegY"),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}());function Ie(t,e){t.getImage().src=e}var Ne,Me=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:At.default,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.contextOptions_=!1===e.imageSmoothing?Kt:void 0,r.renderReprojectionEdges_=!1,r}return Ae(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[i];n.expireCache(n==r?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!y.equivalent(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!y.equivalent(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!y.equivalent(e,t)){var r=St.getUid(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Se(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||y.equivalent(e,t))return this.tileCache;var r=St.getUid(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new ee.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,i,n,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,n),l=s?this.tileUrlFunction(s,i,n):void 0,u=new this.tileClass(a,void 0!==l?yt.default.IDLE:yt.default.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Ft.default.CHANGE,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,r,i,n){var o=this.getProjection();if(o&&n&&!y.equivalent(o,n)){var a=this.getTileCacheForProjection(n),s=[t,e,r],l=void 0,u=ae(s);a.containsKey(u)&&(l=a.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(n),d=this.getTileCoordForTileUrlFunction(s,n),f=new Zt.default(o,h,n,p,s,d,this.getTilePixelRatio(i),this.getGutter(),function(t,e,r,i){return this.getTileInternal(t,e,r,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),a.replace(u,f)):a.set(u,f),f}return this.getTileInternal(t,e,r,i,o||n)},e.prototype.getTileInternal=function(t,e,r,i,n){var o=null,a=oe(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;o=this.createTile_(t,e,r,i,n,s),l.getState()==yt.default.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,i,n,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=y.get(t);if(r){var i=St.getUid(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(ue.default),Le=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ze=function(t){function e(e){var r=e||{},i=void 0!==r.projection?r.projection:"EPSG:3857",n=void 0!==r.tileGrid?r.tileGrid:function(t){var e=t||{},r=e.extent||y.get("EPSG:3857").getExtent(),i={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:we(r,e.maxZoom,e.tileSize,e.maxResolution)};return new Te(i)}({extent:Ce(i),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return Le(e,t),e}(Rt.default),De=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Xe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Ge=function(t){function e(e){var r,i=e||{};r=void 0!==i.attributions?i.attributions:[Xe];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",o=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:n,imageSmoothing:i.imageSmoothing,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:o,wrapX:i.wrapX})||this}return De(e,t),e}(jt.default),Ye=o("3CnQS"),Ze=o("1z20P");o.register("31oBo",(function(e,r){var i;t(e.exports,"getBundleURL",(()=>i),(t=>i=t));var n=null;function o(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}i=function(){return n||(n=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return o(t[0])}return"/"}()),n}})),o.register("3XRD4",(function(t,e){"use strict";var r=o("3OOJ5").resolve;function i(t){if(""===t)return".";var e="/"===t[t.length-1]?t.slice(0,t.length-1):t,r=e.lastIndexOf("/");return-1===r?".":e.slice(0,r)}function n(t,e){if(t===e)return"";var r=t.split("/");"."===r[0]&&r.shift();var i,n,o=e.split("/");for("."===o[0]&&o.shift(),i=0;(i<o.length||i<r.length)&&null==n;i++)r[i]!==o[i]&&(n=i);var a=[];for(i=0;i<r.length-n;i++)a.push("..");return o.length>n&&a.push.apply(a,o.slice(n)),a.join("/")}t.exports=function(t,e){return n(i(r(t)),r(e))},t.exports._dirname=i,t.exports._relative=n})),Ne=o("31oBo").getBundleURL()+o("3XRD4")("6dNpu","54TNJ");var Ue=o("4R4Ev"),We=(o("YyeWG"),Tt=o("5ljS4"),o("25giy"));y=o("2vjin");var qe=new at.default({source:new kt.default}),Ke=new Ze.Style({image:new Ze.Circle({fill:new Ze.Fill({color:"rgb(255,240,0)"}),stroke:new Ze.Stroke({color:"rgb(255,170,0)",width:1.5}),radius:11}),stroke:new Ze.Stroke({color:"rgb(50,200,50)",width:2})}),He=new Ye.default({url:e(Ne),format:new u.default}),Be=Math.PI/200,Qe=[],Je=new bt.default({source:He,style:function(t,e){var r;r=ir?30*(Date.now()/1e3-er):rr?30*(rr-er):0;var i=t.getGeometry().getLineString(0),n=tr.minTime+r;n>tr.maxTime&&(n=tr.maxTime,nr(),rr=null);var o=i.getCoordinateAtM(n,!0),a=i.getCoordinateAtM(n+30,!0),s=Math.atan2(a[1]-o[1],a[0]-o[0])-Math.PI/2,l=Ve.getRotation(),u=s-l;u>Be?Ve.setRotation(l+Be):u<-Be?Ve.setRotation(l-Be):Ve.setRotation(s),Ve.setCenter(o);var c=new m.default(o,"XYZM");return Qe.unshift(c),Ke.setGeometry(new ot.default([i,c])),[Ke]}}),Ve=new a.default({center:y.fromLonLat([15.440921,47.153011]),zoom:10,constrainRotation:!1}),$e=new s.default({target:document.getElementById("map"),layers:[qe,Je],controls:[new l.Zoom],view:Ve}),tr={minTime:1/0,maxTime:-1/0,minZ:1/0,maxZ:-1/0,lengths:[],coordinates:[]};He.on("addfeature",(function(t){var e,r,i,n,o=t.feature.getGeometry().getLineString(0).getCoordinates(),a=o[0],s=o.length,l=o[s-1];tr.minTime=a[3],tr.maxTime=l[3];for(var u=0;u<s;++u){var c=o[u][2];c<tr.minZ&&(tr.minZ=c),c>tr.maxZ&&(tr.maxZ=c),0===u?tr.lengths.push(0):tr.lengths.push((e=o[u-1],r=o[u],i=void 0,n=void 0,i=r[0]-e[0],n=r[1]-e[1],Math.sqrt(i*i+n*n)+tr.lengths[u-1]))}tr.coordinates=o,Ve.animate({center:a,zoom:17})}));var er,rr,ir=!1;function nr(){rr=Date.now()/1e3,ir=!1}$e.on("singleclick",(function(){ir?nr():rr?(er+=Date.now()/1e3-rr,ir=!0,He.changed()):(er=Date.now()/1e3,ir=!0,rr=null,He.changed())}));Je.on("postrender",(function(t){if(ir){for(var e=function(t){var e,r=t.frameState,i=Tt.multiply(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),n=We.getSquaredTolerance(r.viewState.resolution,r.pixelRatio),o=y.getUserProjection();return o&&(e=y.getTransformFromProjections(o,r.viewState.projection)),new Ue.default(t.context,r.pixelRatio,r.extent,i,r.viewState.rotation,n,e)}(t),r=Math.min(30,Qe.length),i=0;i<r;i+=6)e.setImageStyle(new Ze.Circle({fill:new Ze.Fill({color:"rgba(255,240,0, "+(1-i/r)+")"}),radius:9})),e.drawPoint(Qe[i]);Qe.length=r,function(t){var e=t.canvas,r=e.width,i=e.height,n=i/5,o=tr.maxZ-tr.minZ,a=tr.lengths[tr.lengths.length-1];t.beginPath(),t.moveTo(0,i);for(var s=0,l=tr.coordinates.length;s<l;s+=2){var u=(d=tr.coordinates[s])[2]-tr.minZ,c=r*tr.lengths[s]/a,h=i-n*u/o;t.lineTo(c,h)}if(t.lineTo(r,i),t.closePath(),t.fillStyle="rgba(0,0,0,0.6)",t.fill(),Qe.length<1)return;var p=Qe[0].getCoordinates()[3];t.beginPath(),t.moveTo(0,i);for(s=0,l=tr.coordinates.length;s<l;s+=2){var d;if((d=tr.coordinates[s])[3]>p)break;u=d[2]-tr.minZ,c=r*tr.lengths[s]/a,h=i-n*u/o;t.lineTo(c,h)}t.lineTo(c,i),t.closePath(),t.fillStyle="rgba(50,170,50,0.5)",t.fill()}(t.context),setTimeout((function(){He.changed()}),100)}else Qe.length=0}))}();
//# sourceMappingURL=bike-track.0bbb8003.js.map
