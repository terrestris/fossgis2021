!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=r.parcelRequire827f;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){let t=a[e];delete a[e];let r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=function(e,t){a[e]=t},r.parcelRequire827f=i),i.register("3OOJ5",(function(t,r){var n,a;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var i={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},n=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("3OOJ5").register(JSON.parse('{"6dNpu":"bike-track.0bbb8003.js","54TNJ":"backhendl.fad54c65.gpx","0acRd":"extent-constrained.7620afdc.css","3s7cU":"extent-constrained.55f9f859.js","4VSVK":"extent-constrained.4d5b3e95.js","39l4W":"mixed-renderers.88cf3e0b.js"}'));var o=i("52PBC"),d=i("5ScHR"),l={};e(l,"default",(()=>ae),(e=>ae=e));var p,s=i("7JkHi"),u=i("3dG11"),c=i("1gVIf"),m=i("7oM0w"),g=i("4LOxL"),f=i("5g6wp"),h=i("6MnPI"),S=i("6u7wO"),k=i("2vjin"),y=i("3MevS"),v=i("4pjCM"),w=i("2rUWQ"),N=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),x=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],P={rte:$,trk:K,wpt:ee},O=S.makeStructureNS(x,{rte:S.makeArrayPusher($),trk:S.makeArrayPusher(K),wpt:S.makeArrayPusher(ee)}),T=S.makeStructureNS(x,{text:S.makeObjectPropertySetter(v.readString,"linkText"),type:S.makeObjectPropertySetter(v.readString,"linkType")}),b=S.makeStructureNS(x,{rte:S.makeChildAppender((function(e,t,r){var n=r[0],a=t.getProperties(),i={node:e};i.properties=a;var o=t.getGeometry();if(o.getType()==c.default.LINE_STRING){var d=w.transformGeometryWithOptions(o,!0,n);i.geometryLayout=d.getLayout(),a.rtept=d.getCoordinates()}var l=r[r.length-1].node,p=L[l.namespaceURI],s=S.makeSequence(a,p);S.pushSerializeAndPop(i,G,S.OBJECT_PROPERTY_NODE_FACTORY,s,r,p)})),trk:S.makeChildAppender((function(e,t,r){var n=r[0],a=t.getProperties(),i={node:e};i.properties=a;var o=t.getGeometry();if(o.getType()==c.default.MULTI_LINE_STRING){var d=w.transformGeometryWithOptions(o,!0,n);a.trkseg=d.getLineStrings()}var l=r[r.length-1].node,p=Z[l.namespaceURI],s=S.makeSequence(a,p);S.pushSerializeAndPop(i,Y,S.OBJECT_PROPERTY_NODE_FACTORY,s,r,p)})),wpt:S.makeChildAppender((function(e,t,r){var n=r[0],a=r[r.length-1];a.properties=t.getProperties();var i=t.getGeometry();if(i.getType()==c.default.POINT){var o=w.transformGeometryWithOptions(i,!0,n);a.geometryLayout=o.getLayout(),re(e,o.getCoordinates(),r)}}))}),A=function(e){function t(t){var r=e.call(this)||this,n=t||{};return r.dataProjection=k.get("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return N(t,e),t.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var t=0,r=e.length;t<r;++t){var n=e[t];if(this.readExtensions_){var a=n.get("extensionsNode_")||null;this.readExtensions_(n,a)}n.set("extensionsNode_",void 0)}},t.prototype.readFeatureFromNode=function(e,t){if(!y.includes(x,e.namespaceURI))return null;var r=P[e.localName];if(!r)return null;var n=r(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null},t.prototype.readFeaturesFromNode=function(e,t){if(!y.includes(x,e.namespaceURI))return[];if("gpx"==e.localName){var r=S.pushParseAndPop([],O,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},t.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=S.createElementNS("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",S.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(S.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),S.pushSerializeAndPop({node:r},b,B,e,[t]),r},t}(h.default),C=S.makeStructureNS(x,{name:S.makeObjectPropertySetter(v.readString),cmt:S.makeObjectPropertySetter(v.readString),desc:S.makeObjectPropertySetter(v.readString),src:S.makeObjectPropertySetter(v.readString),link:V,number:S.makeObjectPropertySetter(v.readNonNegativeInteger),extensions:Q,type:S.makeObjectPropertySetter(v.readString),rtept:function(e,t){var r=S.pushParseAndPop({},_,e,t);if(r){var n=t[t.length-1],a=n.flatCoordinates,i=n.layoutOptions;W(a,i,e,r)}}}),_=S.makeStructureNS(x,{ele:S.makeObjectPropertySetter(v.readDecimal),time:S.makeObjectPropertySetter(v.readDateTime)}),j=S.makeStructureNS(x,{name:S.makeObjectPropertySetter(v.readString),cmt:S.makeObjectPropertySetter(v.readString),desc:S.makeObjectPropertySetter(v.readString),src:S.makeObjectPropertySetter(v.readString),link:V,number:S.makeObjectPropertySetter(v.readNonNegativeInteger),type:S.makeObjectPropertySetter(v.readString),extensions:Q,trkseg:function(e,t){var r=t[t.length-1];S.parseNode(R,e,t);var n=r.flatCoordinates;r.ends.push(n.length)}}),R=S.makeStructureNS(x,{trkpt:function(e,t){var r=S.pushParseAndPop({},E,e,t);if(r){var n=t[t.length-1],a=n.flatCoordinates,i=n.layoutOptions;W(a,i,e,r)}}}),E=S.makeStructureNS(x,{ele:S.makeObjectPropertySetter(v.readDecimal),time:S.makeObjectPropertySetter(v.readDateTime)}),D=S.makeStructureNS(x,{ele:S.makeObjectPropertySetter(v.readDecimal),time:S.makeObjectPropertySetter(v.readDateTime),magvar:S.makeObjectPropertySetter(v.readDecimal),geoidheight:S.makeObjectPropertySetter(v.readDecimal),name:S.makeObjectPropertySetter(v.readString),cmt:S.makeObjectPropertySetter(v.readString),desc:S.makeObjectPropertySetter(v.readString),src:S.makeObjectPropertySetter(v.readString),link:V,sym:S.makeObjectPropertySetter(v.readString),type:S.makeObjectPropertySetter(v.readString),fix:S.makeObjectPropertySetter(v.readString),sat:S.makeObjectPropertySetter(v.readNonNegativeInteger),hdop:S.makeObjectPropertySetter(v.readDecimal),vdop:S.makeObjectPropertySetter(v.readDecimal),pdop:S.makeObjectPropertySetter(v.readDecimal),ageofdgpsdata:S.makeObjectPropertySetter(v.readDecimal),dgpsid:S.makeObjectPropertySetter(v.readNonNegativeInteger),extensions:Q}),I=["text","type"],M=S.makeStructureNS(x,{text:S.makeChildAppender(v.writeStringTextNode),type:S.makeChildAppender(v.writeStringTextNode)}),L=S.makeStructureNS(x,["name","cmt","desc","src","link","number","type","rtept"]),G=S.makeStructureNS(x,{name:S.makeChildAppender(v.writeStringTextNode),cmt:S.makeChildAppender(v.writeStringTextNode),desc:S.makeChildAppender(v.writeStringTextNode),src:S.makeChildAppender(v.writeStringTextNode),link:S.makeChildAppender(te),number:S.makeChildAppender(v.writeNonNegativeIntegerTextNode),type:S.makeChildAppender(v.writeStringTextNode),rtept:S.makeArraySerializer(S.makeChildAppender(re))}),F=S.makeStructureNS(x,["ele","time"]),Z=S.makeStructureNS(x,["name","cmt","desc","src","link","number","type","trkseg"]),Y=S.makeStructureNS(x,{name:S.makeChildAppender(v.writeStringTextNode),cmt:S.makeChildAppender(v.writeStringTextNode),desc:S.makeChildAppender(v.writeStringTextNode),src:S.makeChildAppender(v.writeStringTextNode),link:S.makeChildAppender(te),number:S.makeChildAppender(v.writeNonNegativeIntegerTextNode),type:S.makeChildAppender(v.writeStringTextNode),trkseg:S.makeArraySerializer(S.makeChildAppender((function(e,t,r){var n={node:e};n.geometryLayout=t.getLayout(),n.properties={},S.pushSerializeAndPop(n,H,X,t.getCoordinates(),r)})))}),X=S.makeSimpleNodeFactory("trkpt"),H=S.makeStructureNS(x,{trkpt:S.makeChildAppender(re)}),U=S.makeStructureNS(x,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),z=S.makeStructureNS(x,{ele:S.makeChildAppender(v.writeDecimalTextNode),time:S.makeChildAppender(v.writeDateTimeTextNode),magvar:S.makeChildAppender(v.writeDecimalTextNode),geoidheight:S.makeChildAppender(v.writeDecimalTextNode),name:S.makeChildAppender(v.writeStringTextNode),cmt:S.makeChildAppender(v.writeStringTextNode),desc:S.makeChildAppender(v.writeStringTextNode),src:S.makeChildAppender(v.writeStringTextNode),link:S.makeChildAppender(te),sym:S.makeChildAppender(v.writeStringTextNode),type:S.makeChildAppender(v.writeStringTextNode),fix:S.makeChildAppender(v.writeStringTextNode),sat:S.makeChildAppender(v.writeNonNegativeIntegerTextNode),hdop:S.makeChildAppender(v.writeDecimalTextNode),vdop:S.makeChildAppender(v.writeDecimalTextNode),pdop:S.makeChildAppender(v.writeDecimalTextNode),ageofdgpsdata:S.makeChildAppender(v.writeDecimalTextNode),dgpsid:S.makeChildAppender(v.writeNonNegativeIntegerTextNode)}),J={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function B(e,t,r){var n=e.getGeometry();if(n){var a=J[n.getType()];if(a){var i=t[t.length-1].node;return S.createElementNS(i.namespaceURI,a)}}}function W(e,t,r,n){return e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(e.push(n.ele),delete n.ele,t.hasZ=!0):e.push(0),"time"in n?(e.push(n.time),delete n.time,t.hasM=!0):e.push(0),e}function q(e,t,r){var n=u.default.XY,a=2;if(e.hasZ&&e.hasM?(n=u.default.XYZM,a=4):e.hasZ?(n=u.default.XYZ,a=3):e.hasM&&(n=u.default.XYM,a=3),4!==a){for(var i=0,o=t.length/4;i<o;i++)t[i*a]=t[4*i],t[i*a+1]=t[4*i+1],e.hasZ&&(t[i*a+2]=t[4*i+2]),e.hasM&&(t[i*a+2]=t[4*i+3]);if(t.length=t.length/4*a,r)for(i=0,o=r.length;i<o;i++)r[i]=r[i]/4*a}return n}function V(e,t){var r=t[t.length-1],n=e.getAttribute("href");null!==n&&(r.link=n),S.parseNode(T,e,t)}function Q(e,t){t[t.length-1].extensionsNode_=e}function $(e,t){var r=t[0],n=S.pushParseAndPop({flatCoordinates:[],layoutOptions:{}},C,e,t);if(n){var a=n.flatCoordinates;delete n.flatCoordinates;var i=n.layoutOptions;delete n.layoutOptions;var o=q(i,a),d=new m.default(a,o);w.transformGeometryWithOptions(d,!1,r);var l=new s.default(d);return l.setProperties(n,!0),l}}function K(e,t){var r=t[0],n=S.pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},j,e,t);if(n){var a=n.flatCoordinates;delete n.flatCoordinates;var i=n.ends;delete n.ends;var o=n.layoutOptions;delete n.layoutOptions;var d=q(o,a,i),l=new g.default(a,d,i);w.transformGeometryWithOptions(l,!1,r);var p=new s.default(l);return p.setProperties(n,!0),p}}function ee(e,t){var r=t[0],n=S.pushParseAndPop({},D,e,t);if(n){var a={},i=W([],a,e,n),o=q(a,i),d=new f.default(i,o);w.transformGeometryWithOptions(d,!1,r);var l=new s.default(d);return l.setProperties(n,!0),l}}function te(e,t,r){e.setAttribute("href",t);var n=r[r.length-1].properties,a=[n.linkText,n.linkType];S.pushSerializeAndPop({node:e},M,S.OBJECT_PROPERTY_NODE_FACTORY,a,r,I)}function re(e,t,r){var n=r[r.length-1],a=n.node.namespaceURI,i=n.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),n.geometryLayout){case u.default.XYZM:0!==t[3]&&(i.time=t[3]);case u.default.XYZ:0!==t[2]&&(i.ele=t[2]);break;case u.default.XYM:0!==t[2]&&(i.time=t[2])}var o="rtept"==e.nodeName?F[a]:U[a],d=S.makeSequence(i,o);S.pushSerializeAndPop({node:e,properties:i},z,S.OBJECT_PROPERTY_NODE_FACTORY,d,r,o)}var ne,ae=A,ie=i("4eboh"),oe=(f=i("5g6wp"),i("3SnxS")),de=i("1rnY9"),le=(k=i("2vjin"),i("7M8xZ")),pe=i("3CnQS"),se=i("1z20P");i.register("31oBo",(function(t,r){var n;e(t.exports,"getBundleURL",(()=>n),(e=>n=e));var a=null;function i(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(){return a||(a=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return i(e[0])}return"/"}()),a}})),i.register("3XRD4",(function(e,t){"use strict";var r=i("3OOJ5").resolve;function n(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,r=t.lastIndexOf("/");return-1===r?".":t.slice(0,r)}function a(e,t){if(e===t)return"";var r=e.split("/");"."===r[0]&&r.shift();var n,a,i=t.split("/");for("."===i[0]&&i.shift(),n=0;(n<i.length||n<r.length)&&null==a;n++)r[n]!==i[n]&&(a=n);var o=[];for(n=0;n<r.length-a;n++)o.push("..");return i.length>a&&o.push.apply(o,i.slice(a)),o.join("/")}e.exports=function(e,t){return a(n(r(e)),r(t))},e.exports._dirname=n,e.exports._relative=a})),ne=i("31oBo").getBundleURL()+i("3XRD4")("6dNpu","54TNJ");var ue=i("4R4Ev"),ce=(i("YyeWG"),i("5ljS4")),me=i("25giy");k=i("2vjin");var ge=new oe.default({source:new le.default}),fe=new se.Style({image:new se.Circle({fill:new se.Fill({color:"rgb(255,240,0)"}),stroke:new se.Stroke({color:"rgb(255,170,0)",width:1.5}),radius:11}),stroke:new se.Stroke({color:"rgb(50,200,50)",width:2})}),he=new pe.default({url:t(ne),format:new l.default}),Se=Math.PI/200,ke=[],ye=new de.default({source:he,style:function(e,t){var r;r=Oe?30*(Date.now()/1e3-xe):Pe?30*(Pe-xe):0;var n=e.getGeometry().getLineString(0),a=Ne.minTime+r;a>Ne.maxTime&&(a=Ne.maxTime,Te(),Pe=null);var i=n.getCoordinateAtM(a,!0),o=n.getCoordinateAtM(a+30,!0),d=Math.atan2(o[1]-i[1],o[0]-i[0])-Math.PI/2,l=ve.getRotation(),p=d-l;p>Se?ve.setRotation(l+Se):p<-Se?ve.setRotation(l-Se):ve.setRotation(d),ve.setCenter(i);var s=new f.default(i,"XYZM");return ke.unshift(s),fe.setGeometry(new ie.default([n,s])),[fe]}}),ve=new o.View({center:k.fromLonLat([15.440921,47.153011]),zoom:10,constrainRotation:!1}),we=new o.Map({target:document.getElementById("map"),layers:[ge,ye],controls:[new d.Zoom],view:ve}),Ne={minTime:1/0,maxTime:-1/0,minZ:1/0,maxZ:-1/0,lengths:[],coordinates:[]};he.on("addfeature",(function(e){var t,r,n,a,i=e.feature.getGeometry().getLineString(0).getCoordinates(),o=i[0],d=i.length,l=i[d-1];Ne.minTime=o[3],Ne.maxTime=l[3];for(var p=0;p<d;++p){var s=i[p][2];s<Ne.minZ&&(Ne.minZ=s),s>Ne.maxZ&&(Ne.maxZ=s),0===p?Ne.lengths.push(0):Ne.lengths.push((t=i[p-1],r=i[p],n=void 0,a=void 0,n=r[0]-t[0],a=r[1]-t[1],Math.sqrt(n*n+a*a)+Ne.lengths[p-1]))}Ne.coordinates=i,ve.animate({center:o,zoom:17})}));var xe,Pe,Oe=!1;function Te(){Pe=Date.now()/1e3,Oe=!1}we.on("singleclick",(function(){Oe?Te():Pe?(xe+=Date.now()/1e3-Pe,Oe=!0,he.changed()):(xe=Date.now()/1e3,Oe=!0,Pe=null,he.changed())}));ye.on("postrender",(function(e){if(Oe){for(var t=function(e){var t,r=e.frameState,n=ce.multiply(e.inversePixelTransform.slice(),r.coordinateToPixelTransform),a=me.getSquaredTolerance(r.viewState.resolution,r.pixelRatio),i=k.getUserProjection();return i&&(t=k.getTransformFromProjections(i,r.viewState.projection)),new ue.default(e.context,r.pixelRatio,r.extent,n,r.viewState.rotation,a,t)}(e),r=Math.min(30,ke.length),n=0;n<r;n+=6)t.setImageStyle(new se.Circle({fill:new se.Fill({color:"rgba(255,240,0, "+(1-n/r)+")"}),radius:9})),t.drawPoint(ke[n]);ke.length=r,function(e){var t=e.canvas,r=t.width,n=t.height,a=n/5,i=Ne.maxZ-Ne.minZ,o=Ne.lengths[Ne.lengths.length-1];e.beginPath(),e.moveTo(0,n);for(var d=0,l=Ne.coordinates.length;d<l;d+=2){var p=(m=Ne.coordinates[d])[2]-Ne.minZ,s=r*Ne.lengths[d]/o,u=n-a*p/i;e.lineTo(s,u)}if(e.lineTo(r,n),e.closePath(),e.fillStyle="rgba(0,0,0,0.6)",e.fill(),ke.length<1)return;var c=ke[0].getCoordinates()[3];e.beginPath(),e.moveTo(0,n);for(d=0,l=Ne.coordinates.length;d<l;d+=2){var m;if((m=Ne.coordinates[d])[3]>c)break;p=m[2]-Ne.minZ,s=r*Ne.lengths[d]/o,u=n-a*p/i;e.lineTo(s,u)}e.lineTo(s,n),e.closePath(),e.fillStyle="rgba(50,170,50,0.5)",e.fill()}(e.context),setTimeout((function(){he.changed()}),100)}else ke.length=0}))}();
//# sourceMappingURL=bike-track.0bbb8003.js.map
