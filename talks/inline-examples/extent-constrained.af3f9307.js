!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},i=t.parcelRequire827f;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in n){let t=n[e];delete n[e];let i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=function(e,t){n[e]=t},t.parcelRequire827f=i),i.register("AHHSL",(function(t,r){e(t.exports,"Heatmap",(()=>i("2o9UR").default)),e(t.exports,"Layer",(()=>i("Lzmdv").default)),e(t.exports,"Tile",(()=>i("3SnxS").default));i("2o9UR"),i("Lzmdv"),i("3SnxS")})),i.register("2o9UR",(function(t,r){e(t.exports,"default",(()=>g),(e=>g=e));var n,o=i("1rnY9"),a=i("4Baa8"),s=i("6RQ94"),u=i("4qq0p"),f=i("4eVqD"),c=i("4ZHam"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l="blur",_="gradient",d="radius",p=["#00f","#0ff","#0f0","#ff0","#f00"];var g=function(e){function t(t){var r=this,n=t||{},i=s.assign({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=e.call(this,i)||this).gradient_=null,r.addEventListener(c.getChangeEventType(_),r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:p),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(e){return e.get(o)}:o,r.setRenderOrder(null),r}return h(t,e),t.prototype.getBlur=function(){return this.get(l)},t.prototype.getGradient=function(){return this.get(_)},t.prototype.getRadius=function(){return this.get(d)},t.prototype.handleGradientChanged_=function(){this.gradient_=function(e){for(var t=1,r=256,n=f.createCanvasContext2D(t,r),i=n.createLinearGradient(0,0,t,r),o=1/(e.length-1),a=0,s=e.length;a<s;++a)i.addColorStop(a*o,e[a]);return n.fillStyle=i,n.fillRect(0,0,t,r),n.canvas}(this.getGradient())},t.prototype.setBlur=function(e){this.set(l,e)},t.prototype.setGradient=function(e){this.set(_,e)},t.prototype.setRadius=function(e){this.set(d,e)},t.prototype.createRenderer=function(){return new a.default(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){var t=this.weightFunction_(e);return void 0!==t?u.clamp(t,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(d)+this.get(l))}.bind(this),u_blurSlope:function(){return this.get(d)/Math.max(1,this.get(l))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},t.prototype.renderDeclutter=function(){},t}(o.default)})),i.register("4Baa8",(function(t,r){e(t.exports,"default",(()=>R),(e=>R=e));var n,o=i("6isWD"),a=i("1gVIf"),s=i("2irPz"),u=i("3dwRD"),f=i("5htZK"),c=i("2vgO4"),h=i("7uMvR"),l=i("30fvD"),_=i("4VPJp"),d=i("5ljS4"),p=i("1mHUI"),g=i("4lmw7"),E=i("4MIn8"),m=i("6fegY"),T=i("3H2uZ"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),R=function(e){function t(t,r){var n=this,i=r.uniforms||{},o=d.create();i[_.DefaultUniform.PROJECTION_MATRIX]=o,(n=e.call(this,t,{className:r.className,uniforms:i,postProcesses:r.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new f.default(l.ARRAY_BUFFER,l.DYNAMIC_DRAW),n.hitVerticesBuffer_=new f.default(l.ARRAY_BUFFER,l.DYNAMIC_DRAW),n.indicesBuffer_=new f.default(l.ELEMENT_ARRAY_BUFFER,l.DYNAMIC_DRAW),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var a=r.attributes?r.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:_.AttributeType.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:_.AttributeType.FLOAT},{name:"a_index",size:1,type:_.AttributeType.FLOAT}].concat(a),n.hitDetectionAttributes=[{name:"a_position",size:2,type:_.AttributeType.FLOAT},{name:"a_index",size:1,type:_.AttributeType.FLOAT},{name:"a_hitColor",size:4,type:_.AttributeType.FLOAT},{name:"a_featureUid",size:1,type:_.AttributeType.FLOAT}].concat(a),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=g.createEmpty(),n.currentTransform_=o,n.renderTransform_=d.create(),n.invertRenderTransform_=d.create(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new h.default(n.helper),n.worker_=E.create(),n.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===c.WebGLWorkerMessageType.GENERATE_BUFFERS){var r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,d.makeInverse(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var u=n.getLayer().getSource();return n.sourceListenKeys_=[T.listen(u,s.default.ADDFEATURE,n.handleSourceFeatureAdded_,n),T.listen(u,s.default.CHANGEFEATURE,n.handleSourceFeatureChanged_,n),T.listen(u,s.default.REMOVEFEATURE,n.handleSourceFeatureDelete_,n),T.listen(u,s.default.CLEAR,n.handleSourceFeatureClear_,n)],u.forEachFeature(function(e){this.featureCache_[m.getUid(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(n)),n}return v(t,e),t.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[m.getUid(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},t.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[m.getUid(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},t.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[m.getUid(t)],this.featureCount_--},t.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},t.prototype.renderFrame=function(e){this.preRender(e);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var r=this.helper.getCanvas(),n=e.layerStatesArray[e.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=String(n)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),this.postRender(e),r},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource(),n=e.viewState,i=!e.viewHints[u.default.ANIMATING]&&!e.viewHints[u.default.INTERACTING],a=!g.equals(this.previousExtent_,e.extent),s=this.sourceRevision_<r.getRevision();if(s&&(this.sourceRevision_=r.getRevision()),i&&(a||s)){var f=n.projection,c=n.resolution,h=t instanceof o.default?t.getRenderBuffer():0,l=g.buffer(e.extent,h*c);r.loadFeatures(l,c,f),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),d.multiply(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},t.prototype.rebuildBuffers_=function(e){var t=d.create();this.helper.makeProjectionTransform(e,t);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var s,u=[],f=[],h=0,l=0;for(var _ in this.featureCache_)if((n=(r=this.featureCache_[_]).geometry)&&n.getType()===a.default.POINT){u[0]=n.getFlatCoordinates()[0],u[1]=n.getFlatCoordinates()[1],d.apply(t,u),s=c.colorEncodeId(l+6,f),this.renderInstructions_[h++]=u[0],this.renderInstructions_[h++]=u[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=u[0],this.hitRenderInstructions_[l++]=u[1],this.hitRenderInstructions_[l++]=s[0],this.hitRenderInstructions_[l++]=s[1],this.hitRenderInstructions_[l++]=s[2],this.hitRenderInstructions_[l++]=s[3],this.hitRenderInstructions_[l++]=Number(_));for(var p=void 0,g=0;g<this.customAttributes.length;g++)p=this.customAttributes[g].callback(r.feature,r.properties),this.renderInstructions_[h++]=p,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=p)}var E={type:c.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(E.projectionTransform=t,this.worker_.postMessage(E,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var m={type:c.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=t,m.hitDetection=!0,this.worker_.postMessage(m,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,i){if(p.assert(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=d.apply(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=c.colorDecodeId(s),f=this.hitRenderInstructions_[u],h=Math.floor(f).toString(),l=this.getLayer().getSource().getFeatureByUid(h);return l?n(l,this.getLayer(),null):void 0}},t.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},t.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){T.unlistenByKey(e)})),this.sourceListenKeys_=null,e.prototype.disposeInternal.call(this)},t}(c.default)})),i.register("2irPz",(function(t,r){e(t.exports,"default",(()=>n));var n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}})),i.register("5htZK",(function(t,r){e(t.exports,"default",(()=>u));var n=i("30fvD"),o=(n=i("30fvD"),i("1mHUI")),a={STATIC_DRAW:n.STATIC_DRAW,STREAM_DRAW:n.STREAM_DRAW,DYNAMIC_DRAW:n.DYNAMIC_DRAW};function s(e){switch(e){case n.ARRAY_BUFFER:return Float32Array;case n.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var u=function(){function e(e,t){this.array=null,this.type=e,o.assert(e===n.ARRAY_BUFFER||e===n.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==t?t:a.STATIC_DRAW}return e.prototype.ofSize=function(e){this.array=new(s(this.type))(e)},e.prototype.fromArray=function(e){this.array=s(this.type).from(e)},e.prototype.fromArrayBuffer=function(e){this.array=new(s(this.type))(e)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}()})),i.register("30fvD",(function(t,r){e(t.exports,"ELEMENT_ARRAY_BUFFER",(()=>o)),e(t.exports,"getContext",(()=>d)),e(t.exports,"getSupportedExtensions",(()=>p)),e(t.exports,"STATIC_DRAW",(()=>s)),e(t.exports,"DYNAMIC_DRAW",(()=>u)),e(t.exports,"UNSIGNED_INT",(()=>h)),e(t.exports,"FLOAT",(()=>l)),e(t.exports,"ARRAY_BUFFER",(()=>i)),e(t.exports,"UNSIGNED_BYTE",(()=>f)),e(t.exports,"UNSIGNED_SHORT",(()=>c)),e(t.exports,"STREAM_DRAW",(()=>a));var n,i=34962,o=34963,a=35040,s=35044,u=35048,f=5121,c=5123,h=5125,l=5126,_=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function d(e,t){for(var r=_.length,n=0;n<r;++n)try{var i=e.getContext(_[n],t);if(i)return i}catch(e){}return null}function p(){if(!n){var e=d(document.createElement("canvas"));e&&(n=e.getSupportedExtensions())}return n}})),i.register("2vgO4",(function(t,r){e(t.exports,"writePointFeatureToBuffers",(()=>p),(e=>p=e)),e(t.exports,"getBlankImageData",(()=>g),(e=>g=e)),e(t.exports,"default",(()=>T),(e=>T=e)),e(t.exports,"WebGLWorkerMessageType",(()=>c),(e=>c=e)),e(t.exports,"colorEncodeId",(()=>E),(e=>E=e)),e(t.exports,"colorDecodeId",(()=>m),(e=>m=e));var n,o=i("5iuGx"),a=i("OadRJ"),s=i("4uxJu"),u=i("4VPJp"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c={GENERATE_BUFFERS:"GENERATE_BUFFERS"},h=function(e){function t(t,r){var n=e.call(this,t)||this,i=r||{};return n.helper=new u.default({postProcesses:i.postProcesses,uniforms:i.uniforms}),void 0!==i.className&&(n.helper.getCanvas().className=i.className),n}return f(t,e),t.prototype.disposeInternal=function(){this.helper.dispose(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(e,t){var r=this.getLayer();if(r.hasListener(e)){var n=new a.default(e,null,t,null);r.dispatchEvent(n)}},t.prototype.preRender=function(e){this.dispatchRenderEvent_(s.default.PRERENDER,e)},t.prototype.postRender=function(e){this.dispatchRenderEvent_(s.default.POSTRENDER,e)},t}(o.default),l=[],_={vertexPosition:0,indexPosition:0};function d(e,t,r,n,i){e[t+0]=r,e[t+1]=n,e[t+2]=i}function p(e,t,r,n,i,o){var a=3+i,s=e[t+0],u=e[t+1],f=l;f.length=i;for(var c=0;c<f.length;c++)f[c]=e[t+2+c];var h=o?o.vertexPosition:0,p=o?o.indexPosition:0,g=h/a;return d(r,h,s,u,0),f.length&&r.set(f,h+3),d(r,h+=a,s,u,1),f.length&&r.set(f,h+3),d(r,h+=a,s,u,2),f.length&&r.set(f,h+3),d(r,h+=a,s,u,3),f.length&&r.set(f,h+3),h+=a,n[p++]=g,n[p++]=g+1,n[p++]=g+3,n[p++]=g+1,n[p++]=g+2,n[p++]=g+3,_.vertexPosition=h,_.indexPosition=p,_}function g(){var e=document.createElement("canvas").getContext("2d").createImageData(1,1);return e.data[0]=255,e.data[1]=255,e.data[2]=255,e.data[3]=255,e}function E(e,t){var r=t||[],n=256,i=255;return r[0]=Math.floor(e/n/n/n)/i,r[1]=Math.floor(e/n/n)%n/i,r[2]=Math.floor(e/n)%n/i,r[3]=e%n/i,r}function m(e){var t=0,r=256,n=255;return t+=Math.round(e[0]*r*r*r*n),t+=Math.round(e[1]*r*r*n),t+=Math.round(e[2]*r*n),t+=Math.round(e[3]*n)}var T=h})),i.register("4VPJp",(function(t,r){e(t.exports,"ShaderType",(()=>g),(e=>g=e)),e(t.exports,"DefaultUniform",(()=>E),(e=>E=e)),e(t.exports,"default",(()=>R),(e=>R=e)),e(t.exports,"AttributeType",(()=>m),(e=>m=e)),e(t.exports,"computeAttributesStride",(()=>T),(e=>T=e));var n,o=i("2raQ4"),a=i("7xsVg"),s=i("foGAP"),u=i("30fvD"),f=i("1mHUI"),c=i("6RQ94"),h=i("5ljS4"),l=i("5D0K3"),_=i("6fegY"),d=i("3MevS"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633},E={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},m={UNSIGNED_BYTE:u.UNSIGNED_BYTE,UNSIGNED_SHORT:u.UNSIGNED_SHORT,UNSIGNED_INT:u.UNSIGNED_INT,FLOAT:u.FLOAT};function T(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*v(n.type)}return t}function v(e){switch(e){case m.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case m.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case m.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case m.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var R=function(e){function t(t){var r=e.call(this)||this,n=t||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=u.getContext(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,f.assert(d.includes(u.getSupportedExtensions(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),r.canvas_.addEventListener(o.default.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(o.default.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=h.create(),r.offsetScaleMatrix_=h.create(),r.tmpMat4_=l.create(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var a in n.uniforms)r.uniforms_.push({name:a,value:n.uniforms[a]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(e){return new s.default({webGlContext:i,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})})):[new s.default({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return p(t,e),t.prototype.bindBuffer=function(e){var t=this.getGL(),r=_.getUid(e),n=this.bufferCache_[r];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n);t.bindBuffer(e.getType(),n.webGlBuffer)},t.prototype.flushBufferData=function(e){var t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())},t.prototype.deleteBuffer=function(e){var t=this.getGL(),r=_.getUid(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(o.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(o.default.RESTORED,this.boundHandleWebGLContextRestored_)},t.prototype.prepareDraw=function(e){var t=this.getGL(),r=this.getCanvas(),n=e.size,i=e.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",t.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(e);t.bindTexture(t.TEXTURE_2D,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.prepareDrawToRenderTarget=function(e,t,r){var n=this.getGL(),i=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.drawElements=function(e,t){var r=this.getGL(),n=r.UNSIGNED_INT,i=t-e,o=4*e;r.drawElements(r.TRIANGLES,i,n,o)},t.prototype.finalizeDraw=function(e){for(var t=0;t<this.postProcessPasses_.length;t++)this.postProcessPasses_[t].apply(e,this.postProcessPasses_[t+1]||null)},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(e){var t=e.size,r=e.viewState.rotation,n=h.reset(this.offsetScaleMatrix_);h.scale(n,2/t[0],2/t[1]);var i=h.reset(this.offsetRotateMatrix_);0!==r&&h.rotate(i,-r),this.setUniformMatrixValue(E.OFFSET_SCALE_MATRIX,l.fromTransform(this.tmpMat4_,n)),this.setUniformMatrixValue(E.OFFSET_ROTATION_MATRIX,l.fromTransform(this.tmpMat4_,i)),this.setUniformFloatValue(E.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(E.ZOOM,e.viewState.zoom),this.setUniformFloatValue(E.RESOLUTION,e.viewState.resolution)},t.prototype.applyUniforms=function(e){var t,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((t="function"==typeof i.value?i.value(e):i.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&i.prevValue!==t&&(i.prevValue=t,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(t)&&6===t.length)this.setUniformMatrixValue(i.name,l.fromTransform(this.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),t[0],t[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),t[0],t[1],t[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&r.uniform1f(this.getUniformLocation(i.name),t)}.bind(this))},t.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)},t.prototype.compileShader=function(e,t){var r=this.getGL(),n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n},t.prototype.getProgram=function(e,t){var r=this.getGL(),n=this.compileShader(e,r.FRAGMENT_SHADER),i=this.compileShader(t,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="Fragment shader compliation failed: "+r.getShaderInfoLog(n);throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){a="Vertex shader compilation failed: "+r.getShaderInfoLog(i);throw new Error(a)}if(r.deleteShader(i),!r.getProgramParameter(o,r.LINK_STATUS)){a="GL program linking failed: "+r.getShaderInfoLog(i);throw new Error(a)}return o},t.prototype.getUniformLocation=function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},t.prototype.getAttributeLocation=function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},t.prototype.makeProjectionTransform=function(e,t){var r=e.size,n=e.viewState.rotation,i=e.viewState.resolution,o=e.viewState.center;return h.reset(t),h.compose(t,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),t},t.prototype.setUniformFloatValue=function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)},t.prototype.setUniformMatrixValue=function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)},t.prototype.enableAttributeArray_=function(e,t,r,n,i){var o=this.getAttributeLocation(e);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,t,r,!1,n,i))},t.prototype.enableAttributes=function(e){for(var t=T(e),r=0,n=0;n<e.length;n++){var i=e[n];this.enableAttributeArray_(i.name,i.size,i.type||u.FLOAT,t,r),r+=i.size*v(i.type)}},t.prototype.handleWebGLContextLost=function(){c.clear(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(e,t,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),t?n.texImage2D(n.TEXTURE_2D,0,o,a,s,t):n.texImage2D(n.TEXTURE_2D,0,o,e[0],e[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},t}(a.default)})),i.register("2raQ4",(function(t,r){e(t.exports,"default",(()=>n));var n={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}})),i.register("foGAP",(function(t,r){e(t.exports,"default",(()=>n));var n=function(){function e(e){this.gl_=e.webGlContext;var t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),t.compileShader(r);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(r){this.uniforms_.push({value:e.uniforms[r],location:t.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(e){var t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=t.RGBA,i=t.RGBA,o=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(e,t){var r=this.getGL(),n=e.size;r.bindFramebuffer(r.FRAMEBUFFER,t?t.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(e),r.drawArrays(r.TRIANGLES,0,6)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(e){var t,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((t="function"==typeof i.value?i.value(e):i.value)instanceof HTMLCanvasElement||t instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),t instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,t.width,t.height,0,r.UNSIGNED_BYTE,new Uint8Array(t.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.uniform1i(i.location,n++);else if(Array.isArray(t))switch(t.length){case 2:return void r.uniform2f(i.location,t[0],t[1]);case 3:return void r.uniform3f(i.location,t[0],t[1],t[2]);case 4:return void r.uniform4f(i.location,t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&r.uniform1f(i.location,t)}))},e}()})),i.register("5D0K3",(function(t,r){function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}e(t.exports,"create",(()=>n)),e(t.exports,"fromTransform",(()=>i))})),i.register("7uMvR",(function(t,r){e(t.exports,"default",(()=>a));var n=i("3MevS"),o=new Uint8Array(4),a=function(){function e(e,t){this.helper_=e;var r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return e.prototype.setSize=function(e){n.equals(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())},e.prototype.getSize=function(){return this.size_},e.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},e.prototype.readAll=function(){if(this.dataCacheDirty_){var e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},e.prototype.readPixel=function(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o;this.readAll();var r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return o[0]=this.data_[4*r],o[1]=this.data_[4*r+1],o[2]=this.data_[4*r+2],o[3]=this.data_[4*r+3],o},e.prototype.getTexture=function(){return this.texture_},e.prototype.getFramebuffer=function(){return this.framebuffer_},e.prototype.updateSize_=function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(e[0]*e[1]*4)},e}()})),i.register("4MIn8",(function(t,r){e(t.exports,"create",(()=>o));var n=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),i=URL.createObjectURL(n);function o(){return new Worker(i)}}))}();
//# sourceMappingURL=extent-constrained.af3f9307.js.map
