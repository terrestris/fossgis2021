!function(e,t,r,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i.parcelRequire827f&&i.parcelRequire827f,s=a.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,r){if(!s[t]){if(!e[t]){var o="function"==typeof i.parcelRequire827f&&i.parcelRequire827f;if(!r&&o)return o(t,!0);if(a)return a(t,!0);if(c&&"string"==typeof t)return c(t);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}l.resolve=function(r){return e[t][1][r]||r},l.cache={};var p=s[t]=new u.Module(t);e[t][0].call(p.exports,l,p,p.exports,this)}return s[t].exports;function l(e){return u(l.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=s,u.parent=a,u.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return i.parcelRequire827f}}),i.parcelRequire827f=u;for(var p=0;p<t.length;p++)u(t[p])}({"2nurn":[function(e,t,r){"use strict";t.exports=e("./database"),t.exports.Integer=e("integer"),t.exports.SqliteError=e("./sqlite-error")},{"./database":"2hEbf",integer:"1UZjl","./sqlite-error":"7qQxu"}],"2hEbf":[function(e,t,r){var o=e("process");const n=e("fs"),i=e("path"),a=e("./util"),s=e("bindings")("better_sqlite3.node").Database;function c(e,t){if(null==e&&(e=""),null==t&&(t={}),"string"!=typeof e)throw new TypeError("Expected first argument to be a string");if("object"!=typeof t)throw new TypeError("Expected second argument to be an options object");let r=e.trim();if(r.toLowerCase().startsWith("file:"))throw new TypeError("URI filenames are reserved for internal use only");if("readOnly"in t)throw new TypeError('Misspelled option "readOnly" should be "readonly"');const c=""===r||":memory:"===r,u=a.getBooleanOption(t,"memory"),p=a.getBooleanOption(t,"readonly"),l=a.getBooleanOption(t,"fileMustExist"),f="timeout"in t?t.timeout:5e3,d="verbose"in t?t.verbose:null;if(p&&(u||c))throw new TypeError("In-memory databases cannot be readonly");if(c&&!u&&"memory"in t)throw new TypeError('Option "memory" conflicts with non-existent filename');if(!Number.isInteger(f)||f<0)throw new TypeError('Expected the "timeout" option to be a positive integer');if(f>2147483647)throw new RangeError('Option "timeout" cannot be greater than 2147483647');if(null!=d&&"function"!=typeof d)throw new TypeError('Expected the "verbose" option to be a function');if(!u&&!c&&!n.existsSync(i.dirname(r)))throw new TypeError("Cannot open database because the directory does not exist");return u&&!c&&("win32"===o.platform&&(r=r.replace(/\\/g,"/").replace(/^[a-z]:\//i,"/$&")),r="file:"+r.replace(/#/g,"%23").replace(/\?/g,"%3f").replace(/\/\/+/g,"/")+"?mode=memory&cache=shared"),new s(r,e,u||c,p,l,f,d||null)}a.wrap(s,"pragma",e("./pragma")),a.wrap(s,"function",e("./function")),a.wrap(s,"aggregate",e("./aggregate")),a.wrap(s,"backup",e("./backup")),s.prototype.transaction=e("./transaction"),s.prototype.constructor=c,c.prototype=s.prototype,t.exports=c},{process:"7AgFc",fs:"2RD6T",path:"7rNOE","./util":"4lIpT",bindings:"1cPNW","./pragma":"1R9Cy","./function":"10SjD","./aggregate":"6Wdgj","./backup":"28izq","./transaction":"7sT0V"}],"4lIpT":[function(e,t,r){"use strict";r.getBooleanOption=(e,t)=>{let r=!1;if(t in e&&"boolean"!=typeof(r=e[t]))throw new TypeError(`Expected the "${t}" option to be a boolean`);return r},r.wrap=(e,t,r)=>{const o=e.prototype[t];if("function"!=typeof o)throw new TypeError(`Missing method ${t}`);e.prototype[t]=r(o)}},{}],"1cPNW":[function(e,t,r){var o=e("process"),n=e("fs"),i=e("path"),a=e("file-uri-to-path"),s=i.join,c=i.dirname,u=n.accessSync&&function(e){try{n.accessSync(e)}catch(e){return!1}return!0}||n.existsSync||i.existsSync,p={arrow:" â†’ ",compiled:"compiled",platform:o.platform,arch:o.arch,nodePreGyp:"node-v"+o.versions.modules+"-"+o.platform+"-"+o.arch,version:o.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};t.exports=r=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(p).map((function(t){t in e||(e[t]=p[t])})),e.module_root||(e.module_root=r.getRoot(r.getFileName())),".node"!=i.extname(e.bindings)&&(e.bindings+=".node");for(var t,o,n,a="function"==typeof __webpack_require__?__non_webpack_require__:void 0,c=[],u=0,l=e.try.length;u<l;u++){t=s.apply(null,e.try[u].map((function(t){return e[t]||t}))),c.push(t);try{return o=e.path?a.resolve(t):a(t),e.path||(o.path=t),o}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(n=new Error("Could not locate the bindings file. Tried:\n"+c.map((function(t){return e.arrow+t})).join("\n"))).tries=c,n},r.getFileName=function(e){var t,r=Error.prepareStackTrace,o=Error.stackTraceLimit,n={};Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,o){for(var n=0,i=o.length;n<i;n++)if("/Users/ahocevar/projects/fossgis2021/talks/inline-examples/node_modules/bindings/bindings.js"!==(t=o[n].getFileName())){if(!e)return;if(t!==e)return}},Error.captureStackTrace(n),Error.prepareStackTrace=r,Error.stackTraceLimit=o;return 0===t.indexOf("file://")&&(t=a(t)),t},r.getRoot=function(e){for(var t,r=c(e);;){if("."===r&&(r=o.cwd()),u(s(r,"package.json"))||u(s(r,"node_modules")))return r;if(t===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=r,r=s(r,"..")}}},{process:"7AgFc",fs:"2RD6T",path:"7rNOE","file-uri-to-path":"1VZyy"}],"1VZyy":[function(e,t,r){var o=e("path").sep||"/";t.exports=function(e){if("string"!=typeof e||e.length<=7||"file://"!=e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),i=t.substring(r+1);"localhost"==n&&(n="");n&&(n=o+o+n);i=i.replace(/^(.+)\|/,"$1:"),"\\"==o&&(i=i.replace(/\//g,"\\"));/^.+\:/.test(i)||(i=o+i);return n+i}},{path:"7rNOE"}],"1R9Cy":[function(e,t,r){"use strict";const{getBooleanOption:o}=e("./util");t.exports=e=>function(t,r){if(null==r&&(r={}),"string"!=typeof t)throw new TypeError("Expected first argument to be a string");if("object"!=typeof r)throw new TypeError("Expected second argument to be an options object");const n=o(r,"simple");e.call(this,!0);try{return n?this.prepare(`PRAGMA ${t}`).pluck().get():this.prepare(`PRAGMA ${t}`).all()}finally{e.call(this,!1)}}},{"./util":"4lIpT"}],"10SjD":[function(e,t,r){"use strict";const{getBooleanOption:o}=e("./util");t.exports=e=>function(t,r,n){if(null==r&&(r={}),"function"==typeof r&&(n=r,r={}),"string"!=typeof t)throw new TypeError("Expected first argument to be a string");if("function"!=typeof n)throw new TypeError("Expected last argument to be a function");if("object"!=typeof r)throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");const i="safeIntegers"in r?+o(r,"safeIntegers"):2,a=o(r,"deterministic");let s=-1;if(!o(r,"varargs")){if(s=n.length,!Number.isInteger(s)||s<0)throw new TypeError("Expected function.length to be a positive integer");if(s>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return e.call(this,n,t,s,i,a)}},{"./util":"4lIpT"}],"6Wdgj":[function(e,t,r){"use strict";const{getBooleanOption:o}=e("./util");t.exports=e=>function(t,r){if("string"!=typeof t)throw new TypeError("Expected first argument to be a string");if("object"!=typeof r||null===r)throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");const a="start"in r?r.start:null,s=n(r,"step",!0),c=n(r,"inverse",!1),u=n(r,"result",!1),p="safeIntegers"in r?+o(r,"safeIntegers"):2,l=o(r,"deterministic");let f=-1;if(!o(r,"varargs")&&(f=Math.max(i(s),c?i(c):0),f>0&&(f-=1),f>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return e.call(this,a,s,c,u,t,f,p,l)};const n=(e,t,r)=>{const o=t in e?e[t]:null;if("function"==typeof o)return o;if(null!=o)throw new TypeError(`Expected the "${t}" option to be a function`);if(r)throw new TypeError(`Missing required option "${t}"`);return null},i=({length:e})=>{if(Number.isInteger(e)&&e>=0)return e;throw new TypeError("Expected function.length to be a positive integer")}},{"./util":"4lIpT"}],"28izq":[function(e,t,r){"use strict";const o=e("fs"),n=e("path"),{promisify:i}=e("util"),a=i(o.access);t.exports=e=>async function(t,r){if(null==r&&(r={}),"string"!=typeof t)throw new TypeError("Expected first argument to be a string");if("object"!=typeof r)throw new TypeError("Expected second argument to be an options object");if(!(t=t.trim()))throw new TypeError("Backup filename cannot be an empty string");if(":memory:"===t)throw new TypeError('Invalid backup filename ":memory:"');if(t.toLowerCase().startsWith("file:"))throw new TypeError("URI filenames are reserved for internal use only");const o="attached"in r?r.attached:"main",i="progress"in r?r.progress:null;if("string"!=typeof o)throw new TypeError('Expected the "attached" option to be a string');if(!o)throw new TypeError('The "attached" option cannot be an empty string');if(null!=i&&"function"!=typeof i)throw new TypeError('Expected the "progress" option to be a function');await a(n.dirname(t)).catch((()=>{throw new TypeError("Cannot save backup because the directory does not exist")}));const c=await a(t).then((()=>!1),(()=>!0));return s(e.call(this,o,t,c),i||null)};const s=(e,t)=>{let r=0,o=!0;return new Promise(((n,i)=>{setImmediate((function a(){try{const i=e.transfer(r);if(!i.remainingPages)return e.close(),void n(i);if(o&&(o=!1,r=100),t){const e=t(i);if(void 0!==e){if("number"!=typeof e||e!=e)throw new TypeError("Expected progress callback to return a number or undefined");r=Math.max(0,Math.min(2147483647,Math.round(e)))}}setImmediate(a)}catch(t){e.close(),i(t)}}))}))}},{fs:"2RD6T",path:"7rNOE",util:"1TanC"}],"7sT0V":[function(e,t,r){"use strict";const o=new WeakMap;t.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected first argument to be a function");const t=n(this),{apply:r}=Function.prototype,o={default:{value:i(r,e,this,t.default)},deferred:{value:i(r,e,this,t.deferred)},immediate:{value:i(r,e,this,t.immediate)},exclusive:{value:i(r,e,this,t.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(o.default.value,o),Object.defineProperties(o.deferred.value,o),Object.defineProperties(o.immediate.value,o),Object.defineProperties(o.exclusive.value,o),o.default.value};const n=e=>{let t=o.get(e);if(!t){const r={commit:e.prepare("COMMIT"),rollback:e.prepare("ROLLBACK"),savepoint:e.prepare("SAVEPOINT `\t_bs3.\t`"),release:e.prepare("RELEASE `\t_bs3.\t`"),rollbackTo:e.prepare("ROLLBACK TO `\t_bs3.\t`")};o.set(e,t={default:Object.assign({begin:e.prepare("BEGIN")},r),deferred:Object.assign({begin:e.prepare("BEGIN DEFERRED")},r),immediate:Object.assign({begin:e.prepare("BEGIN IMMEDIATE")},r),exclusive:Object.assign({begin:e.prepare("BEGIN EXCLUSIVE")},r)})}return t},i=(e,t,r,{begin:o,commit:n,rollback:i,savepoint:a,release:s,rollbackTo:c})=>function(){let u,p,l;r.inTransaction?(u=a,p=s,l=c):(u=o,p=n,l=i),u.run();try{const r=e.call(t,this,arguments);return p.run(),r}catch(e){throw r.inTransaction&&(l.run(),l!==i&&p.run()),e}}},{}],"1UZjl":[function(e,t,r){"use strict";const o=t.exports=e("bindings")("integer.node").Integer,n=(e,t)=>{o.hasOwnProperty(e)||Object.defineProperty(o,e,{writable:!1,enumerable:!0,configurable:!1,value:t})},i=(e,t)=>{const r=o.prototype[e];if("function"!=typeof r)throw new TypeError("Missing method");for(const e of t)o.prototype[e]=r};n("MAX_VALUE",o.fromBits(-1,2147483647)),n("MIN_VALUE",o.fromBits(0,-2147483648)),n("ZERO",o.fromBits(0,0)),n("ONE",o.fromBits(1,0)),n("NEG_ONE",o.fromBits(-1,-1)),i("add",["plus"]),i("subtract",["minus","sub"]),i("multiply",["times","mul"]),i("divide",["divideBy","dividedBy","div","over"]),i("modulo",["mod"]),i("negate",["neg"]),i("abs",["absoluteValue"]),i("shiftLeft",["shl"]),i("shiftRight",["shr"]),i("equals",["eq","isEqualTo"]),i("notEquals",["neq","isNotEqualTo","doesNotEqual"]),i("greaterThan",["gt","isGreaterThan"]),i("greaterThanOrEquals",["gte","isGreaterThanOrEqualTo"]),i("lessThan",["lt","isLessThan"]),i("lessThanOrEquals",["lte","isLessThanOrEqualTo"]),i("isNonZero",["isNotZero"]),i("valueOf",["toNumber"])},{bindings:"1cPNW"}],"7qQxu":[function(e,t,r){"use strict";const o={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function n(e,t){if(new.target!==n)return new n(e,t);if("string"!=typeof t)throw new TypeError("Expected second argument to be a string");Error.call(this,e),o.value=""+e,Object.defineProperty(this,"message",o),Error.captureStackTrace(this,n),o.value=t,Object.defineProperty(this,"code",o)}Object.setPrototypeOf(n,Error),Object.setPrototypeOf(n.prototype,Error.prototype),Object.defineProperty(n.prototype,"name",o),t.exports=n},{}]},[]);
//# sourceMappingURL=better-sqlite3.24e4b603.js.map
